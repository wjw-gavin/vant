import{c as w,e as F,T as D,H as h,p as O}from"./use-translate.5fa8a2a1.js";import{w as T}from"./with-install.ff23f643.js";import{s as A,f as E,a as s,g as I,p as N}from"./utils.44a2392e.js";import{P as B}from"./index.e327c7a6.js";import{A as H,u as K,D as R,x as f,e as S,B as U}from"./vue-libs.ed3d9812.js";const g=new Date().getFullYear(),[_]=w("date-picker"),$=F({},A,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(g-10,0,1),validator:D},maxDate:{type:Date,default:()=>new Date(g+10,11,31),validator:D}}),b=H({name:_,props:$,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:r,slots:y}){const n=K(t.modelValue),x=()=>{const e=t.minDate.getFullYear(),a=t.maxDate.getFullYear();return s(e,a,"year",t.formatter,t.filter)},l=e=>e===t.minDate.getFullYear(),i=e=>e===t.maxDate.getFullYear(),M=e=>e===t.minDate.getMonth()+1,Y=e=>e===t.maxDate.getMonth()+1,c=e=>{const{minDate:a,columnsType:o}=t,m=o.indexOf(e),d=n.value[m];if(d)return+d;switch(e){case"year":return a.getFullYear();case"month":return a.getMonth()+1;case"day":return a.getDate()}},v=()=>{const e=c("year"),a=l(e)?t.minDate.getMonth()+1:1,o=i(e)?t.maxDate.getMonth()+1:12;return s(a,o,"month",t.formatter,t.filter)},P=()=>{const e=c("year"),a=c("month"),o=l(e)&&M(a)?t.minDate.getDate():1,m=i(e)&&Y(a)?t.maxDate.getDate():I(e,a);return s(o,m,"day",t.formatter,t.filter)},u=R(()=>t.columnsType.map(e=>{switch(e){case"year":return x();case"month":return v();case"day":return P();default:throw new Error(`[Vant] DatePicker: unsupported columns type: ${e}`)}}));f(n,e=>{h(e,t.modelValue)||r("update:modelValue",e)}),f(()=>t.modelValue,e=>{e=E(e,u.value),h(e,n.value)||(n.value=e)},{immediate:!0});const V=(...e)=>r("change",...e),k=(...e)=>r("cancel",...e),C=(...e)=>r("confirm",...e);return()=>S(B,U({modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:u.value,onChange:V,onCancel:k,onConfirm:C},O(t,N)),y)}}),L=T(b);export{L as D};
