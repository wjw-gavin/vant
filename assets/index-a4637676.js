import{V as w,b as z}from"./index-4df09dfc.js";import{V as I}from"./index-122de2bc.js";import{V as L}from"./index-22f0fe19.js";import{m as R,c as E,o as $,h as V,l as G,a0 as W,a as j}from"./use-translate-71d4880c.js";import{u as q}from"./use-lock-scroll-01f1fb06.js";import{u as J}from"./use-touch-4e22f945.js";import{u as K}from"./use-sync-prop-ref-75980c5c.js";import{A as U,y as x,D as y,u as Q,e as n,o as k,c as X,w as s,C as t,a as Z,F as tt,b as et,d as p,t as P}from"./vue-libs-19c20d28.js";import{c as M}from"./closest-17b2cc6c.js";import{c as B,b as at,t as H,w as nt}from"./with-install-560d59bf.js";import"./use-id-09c3f4cb.js";import"./use-expose-80cfd2b2.js";import"./use-route-751feeeb.js";import"./index-8bc2514f.js";import"./index-c7590142.js";import"./on-popup-reopen-6f4c2d78.js";import"./use-refs-c698ebdb.js";import"./index-7f2a8246.js";import"./constant-ee6e27d7.js";import"./interceptor-07dc6e0f.js";import"./index-1ef61aa2.js";const ot={height:B(0),anchors:at(),duration:B(.2),contentDraggable:H,lockScroll:Boolean,safeAreaInsetBottom:H},[lt,_]=E("floating-panel"),rt=U({name:lt,props:ot,emits:["heightChange","update:height"],setup(o,{emit:h,slots:r}){const i=x(),m=x(),a=K(()=>+o.height,e=>h("update:height",e)),l=y(()=>({min:o.anchors[0]??100,max:o.anchors[o.anchors.length-1]??Math.round($.value*.6)})),C=y(()=>o.anchors.length>=2?o.anchors:[l.value.min,l.value.max]),D=x(!1),F=y(()=>({height:V(l.value.max),transform:`translateY(calc(100% + ${V(-a.value)}))`,transition:D.value?"none":`transform ${o.duration}s`})),N=e=>{const c=Math.abs(e),{min:g,max:u}=l.value;return c>u?-(u+(c-u)*.2):c<g?-(g-(g-c)*.2):e};let f,d=-1;const v=J(),O=e=>{v.start(e),D.value=!0,f=-a.value,d=-1},Y=e=>{var u;v.move(e);const c=e.target;if(m.value===c||(u=m.value)!=null&&u.contains(c)){const{scrollTop:T}=m.value;if(d=Math.max(d,T),!o.contentDraggable)return;if(-f<l.value.max)G(e,!0);else if(!(T<=0&&v.deltaY.value>0)||d>0)return}const g=v.deltaY.value+f;a.value=-N(g)},A=()=>{d=-1,D.value=!1,a.value=M(C.value,a.value),a.value!==-f&&h("heightChange",{height:a.value})};return Q(l,()=>{a.value=M(C.value,a.value)},{immediate:!0}),q(i,()=>o.lockScroll),R("touchmove",Y,{target:i}),()=>{var e;return n("div",{class:[_(),{"van-safe-area-bottom":o.safeAreaInsetBottom}],ref:i,style:F.value,onTouchstartPassive:O,onTouchend:A,onTouchcancel:A},[n("div",{class:_("header")},[n("div",{class:_("header-bar")},null)]),n("div",{class:_("content"),ref:m},[(e=r.default)==null?void 0:e.call(r)])])}}}),st=nt(rt),S=st,it={style:{"text-align":"center",padding:"15px"}},ct={style:{"text-align":"center",padding:"15px"}},Mt=U({__name:"index",setup(o){const{height:h}=W(),r=j({"zh-CN":{customAnchors:"自定义锚点",headDragOnly:"仅头部拖拽",panelShowHeight:"面板显示高度",contentUnDrag:"内容不可拖拽"},"en-US":{customAnchors:"Custom Anchors",headDragOnly:"Head Drag Only",panelShowHeight:"Panel Show Height",contentUnDrag:"Content cannot be dragged"}}),b=[100,Math.round(.4*h.value),Math.round(.7*h.value)],i=x(b[0]);return(m,a)=>(k(),X(t(z),null,{default:s(()=>[n(t(w),{title:t(r)("basicUsage")},{default:s(()=>[n(t(S),null,{default:s(()=>[n(t(L),null,{default:s(()=>[(k(),Z(tt,null,et(26,l=>n(t(I),{key:l,title:String.fromCharCode(l+64),size:"large"},null,8,["title"])),64))]),_:1})]),_:1})]),_:1},8,["title"]),n(t(w),{title:t(r)("customAnchors")},{default:s(()=>[n(t(S),{height:i.value,"onUpdate:height":a[0]||(a[0]=l=>i.value=l),anchors:b},{default:s(()=>[p("div",it,[p("p",null,P(t(r)("panelShowHeight"))+" "+P(i.value.toFixed(0))+" px",1)])]),_:1},8,["height"])]),_:1},8,["title"]),n(t(w),{title:t(r)("headDragOnly")},{default:s(()=>[n(t(S),{"content-draggable":!1},{default:s(()=>[p("div",ct,[p("p",null,P(t(r)("contentUnDrag")),1)])]),_:1})]),_:1},8,["title"])]),_:1}))}});export{Mt as default};
